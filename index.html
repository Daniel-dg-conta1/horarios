<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Acadêmico Integrado - IFRS</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel para compilar JSX no navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        .bg-diagonal-stripes {
            background-image: linear-gradient(45deg, rgba(0,0,0,0.05) 25%, transparent 25%, transparent 50%, rgba(0,0,0,0.05) 50%, rgba(0,0,0,0.05) 75%, transparent 75%, transparent);
            background-size: 10px 10px;
        }
        
        body {
            background-color: #f8fafc;
        }
        
        /* Scrollbar fina para tabelas */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        @media print {
            body { background-color: white; }
            .no-print { display: none !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // --- ÍCONES SVG ---
        const Icon = ({ path, className }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="24" height="24" viewBox="0 0 24 24" 
                fill="none" stroke="currentColor" strokeWidth="2" 
                strokeLinecap="round" strokeLinejoin="round" 
                className={className}
            >
                {path}
            </svg>
        );

        const Icons = {
            Calendar: <path d="M19 4H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zM16 2v4M8 2v4M3 10h18" />,
            Users: <><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M23 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></>,
            User: <><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></>,
            Check: <><polyline points="20 6 9 17 4 12" /></>,
            Clock: <><circle cx="12" cy="12" r="10" /><polyline points="12 6 12 12 16 14" /></>,
            Printer: <><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></>,
            MapPin: <><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" /><circle cx="12" cy="10" r="3" /></>,
            Search: <><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></>
        };

        // --- DADOS DOS HORÁRIOS ---
        const TIME_SLOTS = [
            "07:30 - 08:20", "08:20 - 09:10", "09:10 - 10:00", 
            "10:20 - 11:10", "11:10 - 12:00", 
            "13:30 - 14:20", "14:20 - 15:10", "15:30 - 16:20", 
            "16:20 - 17:10", "17:10 - 18:00", 
            "18:00 - 18:50", "18:50 - 19:40", "19:40 - 20:30", 
            "20:40 - 21:30", "21:30 - 22:20"
        ];
        const DAYS = ["Segunda", "Terça", "Quarta", "Quinta", "Sexta"];

        const SCHEDULE_DANIEL = {
            "3-0": "Usinagem - 4TFMm", "3-1": "Usinagem - 4TFMm", "3-2": "Usinagem - 4TFMm",
            "3-3": "Tecnologia Mecânica - 2TFMm", "3-4": "Tecnologia Mecânica - 2TFMm",
            "3-5": "Tecnologia Mecânica - 2TFMt", "3-6": "Tecnologia Mecânica - 2TFMt",
            "1-7": "Usinagem - 4TFMt", "1-8": "Usinagem - 4TFMt", "1-9": "Usinagem - 4TFMt",
            "0-11": "Comando Numérico e Automação - 9 EM", "0-12": "Comando Numérico e Automação - 9 EM",
            "0-13": "Comando Numérico e Automação - 9 EM", "0-14": "Comando Numérico e Automação - 9 EM",
            "1-13": "Processos de Usinagem I - 7EM", "1-14": "Processos de Usinagem I - 7EM"
        };

        const SCHEDULE_FERNANDA = {
            "0-0": "Biologia I - 3TPm", "0-1": "Biologia I - 3TPm",
            "0-3": "Biotecnologia - 4TQm", "0-4": "Biotecnologia - 4TQm",
            "0-7": "Biologia I - 3TFMt", "0-8": "Biologia I - 3TFMt",
            "1-5": "Biotecnologia - 4TQt", "1-6": "Biotecnologia - 4TQt",
            "1-8": "Biologia I - 3TQt", "1-9": "Biologia I - 3TQt",
            "4-0": "Biologia I - 3TFMm", "4-1": "Biologia I - 3TFMm",
            "4-3": "Biologia I - 3TQm", "4-4": "Biologia I - 3TQm",
            "4-5": "Biologia I - 3TPt", "4-6": "Biologia I - 3TPt"
        };

        const ACADEMIC_EVENTS = [
            { date: "2026-01-02", end: "2026-02-18", title: "Férias Docentes", type: "recess" },
            { date: "2026-02-16", title: "Carnaval", type: "holiday" },
            { date: "2026-02-21", title: "Início do Ano Letivo", type: "academic", highlight: true },
            { date: "2026-03-07", title: "Sábado Letivo (Horário de Segunda)", type: "saturday" },
            { date: "2026-04-21", title: "Tiradentes", type: "holiday" },
            { date: "2026-05-01", title: "Dia do Trabalho", type: "holiday" },
            { date: "2026-07-20", end: "2026-07-31", title: "Recesso Escolar", type: "recess" },
            { date: "2026-08-03", title: "Início do 2º Semestre", type: "academic", highlight: true },
            { date: "2026-09-07", title: "Independência do Brasil", type: "holiday" },
            { date: "2026-09-20", title: "Revolução Farroupilha", type: "holiday" },
            { date: "2026-10-15", title: "Dia do Professor", type: "celebration" },
            { date: "2026-12-05", title: "Término do Ano Letivo", type: "academic", highlight: true }
        ];

        // --- COMPONENTS ---

        const ScheduleView = () => {
            const [viewMode, setViewMode] = useState('intersection');

            const getCellData = (dayIndex, timeIndex) => {
                const key = `${dayIndex}-${timeIndex}`;
                const danielClass = SCHEDULE_DANIEL[key];
                const fernandaClass = SCHEDULE_FERNANDA[key];
                return { danielClass, fernandaClass };
            };

            const stats = useMemo(() => {
                const danielCount = Object.keys(SCHEDULE_DANIEL).length;
                const fernandaCount = Object.keys(SCHEDULE_FERNANDA).length;
                let commonFreeSlots = 0;
                DAYS.forEach((_, dIdx) => {
                    TIME_SLOTS.forEach((_, tIdx) => {
                        const { danielClass, fernandaClass } = getCellData(dIdx, tIdx);
                        if (!danielClass && !fernandaClass) commonFreeSlots++;
                    });
                });
                return { danielCount, fernandaCount, commonFreeSlots };
            }, []);

            return (
                <div className="space-y-6">
                    <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-4 justify-between items-center no-print">
                        <div className="flex bg-slate-100 p-1 rounded-lg">
                            <button onClick={() => setViewMode('daniel')} className={`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center ${viewMode === 'daniel' ? 'bg-white shadow text-blue-700' : 'text-slate-500'}`}>
                                <Icon path={Icons.User} className="w-4 h-4 mr-2" /> Daniel
                            </button>
                            <button onClick={() => setViewMode('fernanda')} className={`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center ${viewMode === 'fernanda' ? 'bg-white shadow text-purple-700' : 'text-slate-500'}`}>
                                <Icon path={Icons.User} className="w-4 h-4 mr-2" /> Fernanda
                            </button>
                            <button onClick={() => setViewMode('intersection')} className={`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center ${viewMode === 'intersection' ? 'bg-emerald-600 shadow text-white' : 'text-slate-500'}`}>
                                <Icon path={Icons.Users} className="w-4 h-4 mr-2" /> Comparar
                            </button>
                        </div>
                        <div className="flex gap-4 text-sm">
                            <div className="flex items-center"><span className="w-2 h-2 rounded-full bg-blue-500 mr-2"></span> Daniel: <strong>{stats.danielCount}</strong></div>
                            <div className="flex items-center"><span className="w-2 h-2 rounded-full bg-purple-500 mr-2"></span> Fernanda: <strong>{stats.fernandaCount}</strong></div>
                            <div className="flex items-center"><span className="w-2 h-2 rounded-full bg-emerald-500 mr-2"></span> Livres: <strong>{stats.commonFreeSlots}</strong></div>
                        </div>
                    </div>

                    <div className="bg-white rounded-xl shadow border border-slate-200 overflow-hidden">
                        <div className="overflow-x-auto">
                            <table className="w-full text-sm border-collapse">
                                <thead>
                                    <tr>
                                        <th className="p-3 border-b border-r border-slate-200 bg-slate-50 text-slate-500 w-32 sticky left-0 z-10 font-semibold uppercase text-xs">Horário</th>
                                        {DAYS.map(day => (
                                            <th key={day} className="p-3 border-b border-slate-200 bg-slate-50 text-slate-700 font-bold min-w-[140px] uppercase text-xs">
                                                {day}
                                            </th>
                                        ))}
                                    </tr>
                                </thead>
                                <tbody>
                                    {TIME_SLOTS.map((time, tIdx) => (
                                        <tr key={tIdx} className="hover:bg-slate-50 transition-colors group">
                                            <td className="p-2 border-r border-b border-slate-100 text-[10px] text-slate-500 font-mono text-center bg-slate-50 group-hover:bg-slate-100 sticky left-0 z-10">
                                                {time}
                                            </td>
                                            {DAYS.map((_, dIdx) => {
                                                const { danielClass, fernandaClass } = getCellData(dIdx, tIdx);
                                                const hasDan = !!danielClass;
                                                const hasFer = !!fernandaClass;
                                                
                                                let cellClass = "border-b border-slate-100 p-1 h-14 align-top transition-all text-[11px] ";
                                                let content = null;

                                                if (viewMode === 'intersection') {
                                                    if (!hasDan && !hasFer) {
                                                        cellClass += "bg-emerald-50 text-emerald-800 text-center align-middle hover:bg-emerald-100";
                                                        content = <div className="font-bold text-emerald-600">LIVRE</div>;
                                                    } else {
                                                        cellClass += "bg-slate-50 opacity-90";
                                                        content = (
                                                            <div className="flex flex-col gap-1">
                                                                {hasDan && <div className="text-blue-800 font-medium truncate" title={danielClass}>D: {danielClass.split('-')[0]}</div>}
                                                                {hasFer && <div className="text-purple-800 font-medium truncate" title={fernandaClass}>F: {fernandaClass.split('-')[0]}</div>}
                                                            </div>
                                                        );
                                                    }
                                                } else if (viewMode === 'daniel') {
                                                    if (hasDan) {
                                                        cellClass += "bg-blue-50 border-l-2 border-blue-500";
                                                        content = <div className="text-blue-900 font-medium p-1">{danielClass}</div>;
                                                    }
                                                } else if (viewMode === 'fernanda') {
                                                    if (hasFer) {
                                                        cellClass += "bg-purple-50 border-l-2 border-purple-500";
                                                        content = <div className="text-purple-900 font-medium p-1">{fernandaClass}</div>;
                                                    }
                                                }

                                                return <td key={dIdx} className={cellClass}>{content}</td>;
                                            })}
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );
        };

        const CalendarView = () => {
            const [filter, setFilter] = useState('all');
            const months = [...new Set(ACADEMIC_EVENTS.map(e => parseInt(e.date.split('-')[1])))].sort((a,b)=>a-b);
            const monthNames = ["", "Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];

            const filteredEvents = ACADEMIC_EVENTS.filter(e => filter === 'all' || e.type === filter);

            const getTypeColor = (type) => {
                switch(type) {
                    case 'holiday': return 'bg-red-100 text-red-700 border-red-200';
                    case 'academic': return 'bg-blue-100 text-blue-700 border-blue-200';
                    case 'recess': return 'bg-orange-100 text-orange-700 border-orange-200';
                    case 'saturday': return 'bg-amber-100 text-amber-700 border-amber-200';
                    default: return 'bg-slate-100 text-slate-700 border-slate-200';
                }
            };

            return (
                <div className="space-y-6">
                    <div className="flex gap-2 overflow-x-auto pb-2 no-print">
                        {['all', 'academic', 'holiday', 'saturday', 'recess'].map(type => (
                            <button 
                                key={type}
                                onClick={() => setFilter(type)}
                                className={`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider whitespace-nowrap transition-colors ${filter === type ? 'bg-slate-800 text-white' : 'bg-white text-slate-500 border border-slate-200 hover:bg-slate-50'}`}
                            >
                                {type === 'all' ? 'Todos' : type === 'academic' ? 'Acadêmico' : type === 'holiday' ? 'Feriados' : type === 'saturday' ? 'Sábados Letivos' : 'Recessos'}
                            </button>
                        ))}
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        {months.map(m => {
                            const monthEvents = filteredEvents.filter(e => parseInt(e.date.split('-')[1]) === m);
                            if (monthEvents.length === 0) return null;

                            return (
                                <div key={m} className="bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm">
                                    <div className="bg-slate-50 px-4 py-2 border-b border-slate-100 font-bold text-slate-700">
                                        {monthNames[m]}
                                    </div>
                                    <div className="divide-y divide-slate-50">
                                        {monthEvents.map((ev, idx) => (
                                            <div key={idx} className={`p-4 hover:bg-slate-50 transition-colors ${ev.highlight ? 'bg-blue-50/50' : ''}`}>
                                                <div className="flex justify-between items-start mb-1">
                                                    <span className="font-mono text-xs font-bold text-slate-500">
                                                        {ev.date.split('-')[2]}
                                                        {ev.end ? ` - ${ev.end.split('-')[2]}` : ''}
                                                    </span>
                                                    <span className={`text-[10px] px-2 py-0.5 rounded border ${getTypeColor(ev.type)} uppercase`}>
                                                        {ev.type === 'saturday' ? 'Sábado' : ev.type}
                                                    </span>
                                                </div>
                                                <div className="font-medium text-sm text-slate-800 leading-tight">
                                                    {ev.title}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        };

        // Componente Principal (Layout)
        function App() {
            const [activeTab, setActiveTab] = useState('schedule');

            return (
                <div className="min-h-screen pb-20 relative">
                    {/* Header */}
                    <div className="bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm">
                        <div className="max-w-7xl mx-auto px-4">
                            <div className="flex flex-col md:flex-row justify-between items-center py-4 gap-4">
                                <div className="flex items-center space-x-3">
                                    <div className="bg-red-600 p-2 rounded-lg shadow text-white">
                                        <Icon path={Icons.Calendar} className="w-6 h-6" />
                                    </div>
                                    <div>
                                        <h1 className="text-xl font-bold text-slate-800">Painel Docente IFRS</h1>
                                        <p className="text-xs text-slate-500 font-medium">Caxias do Sul - 2026</p>
                                    </div>
                                </div>
                                
                                {/* Navegação de Abas e Imprimir */}
                                <div className="flex bg-slate-100 p-1 rounded-lg w-full md:w-auto no-print">
                                    <button 
                                        onClick={() => setActiveTab('schedule')}
                                        className={`flex-1 md:flex-none px-6 py-2 text-sm font-bold rounded-md transition-all flex items-center justify-center ${activeTab === 'schedule' ? 'bg-white shadow text-slate-800' : 'text-slate-500 hover:text-slate-700'}`}
                                    >
                                        <Icon path={Icons.Clock} className="w-4 h-4 mr-2" /> Horários
                                    </button>
                                    <button 
                                        onClick={() => setActiveTab('calendar')}
                                        className={`flex-1 md:flex-none px-6 py-2 text-sm font-bold rounded-md transition-all flex items-center justify-center ${activeTab === 'calendar' ? 'bg-white shadow text-slate-800' : 'text-slate-500 hover:text-slate-700'}`}
                                    >
                                        <Icon path={Icons.Calendar} className="w-4 h-4 mr-2" /> Calendário
                                    </button>
                                    <button 
                                        onClick={() => window.print()}
                                        className="flex-1 md:flex-none px-6 py-2 text-sm font-bold rounded-md transition-all flex items-center justify-center text-slate-500 hover:text-slate-700 hover:bg-white hover:shadow"
                                    >
                                        <Icon path={Icons.Printer} className="w-4 h-4 mr-2" /> Imprimir
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <main className="max-w-7xl mx-auto px-4 py-8">
                        {activeTab === 'schedule' ? <ScheduleView /> : <CalendarView />}
                    </main>

                    {/* Footer */}
                    <footer className="max-w-7xl mx-auto px-4 pb-8 no-print border-t border-slate-200 pt-6 mt-8">
                        <div className="text-center text-xs text-slate-400">
                            <p>Dados baseados na planilha "horários.xlsx" e no "Calendário Acadêmico 2026.pdf". Atualizado em Dez/2025.</p>
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
